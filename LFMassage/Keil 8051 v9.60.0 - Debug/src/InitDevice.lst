C51 COMPILER V9.60.0.0   INITDEVICE                                                        10/13/2021 20:42:09 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE INITDEVICE
OBJECT MODULE PLACED IN .\src\InitDevice.OBJ
COMPILER INVOKED BY: C:\SiliconLabs\SimplicityStudio\v5\developer\toolchains\keil_8051\9.60\BIN\C51.exe C:\Users\donny\S
                    -implicityStudio\v5_workspace\LFMassage\src\InitDevice.c OMF2 SMALL DEBUG OBJECTEXTEND ROM(LARGE) WARNINGLEVEL(2) FLOATFU
                    -ZZY(3) OPTIMIZE(8,SPEED) DEFINE(DEBUG=1) INTVECTOR(0X0000) INTPROMOTE INCDIR(C:\Users\donny\SimplicityStudio\v5_workspac
                    -e\LFMassage\inc;C:/SiliconLabs/SimplicityStudio/v5/developer/sdks/8051/v4.2.1//Device/shared/si8051Base;C:/SiliconLabs/S
                    -implicityStudio/v5/developer/sdks/8051/v4.2.1//Device/EFM8BB1/inc) PRINT(.\src\InitDevice.lst) COND PAGEWIDTH(120) PAGEL
                    -ENGTH(65) OBJECT(.\src\InitDevice.OBJ)

line level    source

   1          //=========================================================
   2          // src/InitDevice.c: generated by Hardware Configurator
   3          //
   4          // This file will be regenerated when saving a document.
   5          // leave the sections inside the "$[...]" comment tags alone
   6          // or they will be overwritten!
   7          //=========================================================
   8          
   9          // USER INCLUDES
  10          #include <SI_EFM8BB1_Register_Enums.h>
  11          #include "InitDevice.h"
  12          
  13          // USER PROTOTYPES
  14          // USER FUNCTIONS
  15          
  16          // $[Library Includes]
  17          // [Library Includes]$
  18          
  19          //==============================================================================
  20          // enter_DefaultMode_from_RESET
  21          //==============================================================================
  22          extern void
  23          enter_DefaultMode_from_RESET (void)
  24          {
  25   1        // $[Config Calls]
  26   1        WDT_0_enter_DefaultMode_from_RESET ();
  27   1        PORTS_0_enter_DefaultMode_from_RESET ();
  28   1        PORTS_1_enter_DefaultMode_from_RESET ();
  29   1        PBCFG_0_enter_DefaultMode_from_RESET ();
  30   1        ADC_0_enter_DefaultMode_from_RESET ();
  31   1        CMP_0_enter_DefaultMode_from_RESET ();
  32   1        TIMER01_0_enter_DefaultMode_from_RESET ();
  33   1        TIMER16_2_enter_DefaultMode_from_RESET ();
  34   1        TIMER16_3_enter_DefaultMode_from_RESET ();
  35   1        TIMER_SETUP_0_enter_DefaultMode_from_RESET ();
  36   1        EXTINT_0_enter_DefaultMode_from_RESET ();
  37   1        INTERRUPT_0_enter_DefaultMode_from_RESET ();
  38   1        // [Config Calls]$
  39   1      
  40   1      }
  41          
  42          extern void
  43          PORTS_0_enter_DefaultMode_from_RESET (void)
  44          {
  45   1        // $[P0 - Port 0 Pin Latch]
  46   1        /***********************************************************************
  47   1         - P0.0 is high. Set P0.0 to drive or float high
  48   1         - P0.1 is high. Set P0.1 to drive or float high
  49   1         - P0.2 is high. Set P0.2 to drive or float high
  50   1         - P0.3 is high. Set P0.3 to drive or float high
  51   1         - P0.4 is high. Set P0.4 to drive or float high
C51 COMPILER V9.60.0.0   INITDEVICE                                                        10/13/2021 20:42:09 PAGE 2   

  52   1         - P0.5 is high. Set P0.5 to drive or float high
  53   1         - P0.6 is high. Set P0.6 to drive or float high
  54   1         - P0.7 is low. Set P0.7 to drive low
  55   1         ***********************************************************************/
  56   1        P0 = P0_B0__HIGH | P0_B1__HIGH | P0_B2__HIGH | P0_B3__HIGH | P0_B4__HIGH
  57   1            | P0_B5__HIGH | P0_B6__HIGH | P0_B7__LOW;
  58   1        // [P0 - Port 0 Pin Latch]$
  59   1      
  60   1        // $[P0MDOUT - Port 0 Output Mode]
  61   1        /***********************************************************************
  62   1         - P0.0 output is open-drain
  63   1         - P0.1 output is open-drain
  64   1         - P0.2 output is open-drain
  65   1         - P0.3 output is push-pull
  66   1         - P0.4 output is push-pull
  67   1         - P0.5 output is push-pull
  68   1         - P0.6 output is push-pull
  69   1         - P0.7 output is push-pull
  70   1         ***********************************************************************/
  71   1        P0MDOUT = P0MDOUT_B0__OPEN_DRAIN | P0MDOUT_B1__OPEN_DRAIN
  72   1            | P0MDOUT_B2__OPEN_DRAIN | P0MDOUT_B3__PUSH_PULL | P0MDOUT_B4__PUSH_PULL
  73   1            | P0MDOUT_B5__PUSH_PULL | P0MDOUT_B6__PUSH_PULL | P0MDOUT_B7__PUSH_PULL;
  74   1        // [P0MDOUT - Port 0 Output Mode]$
  75   1      
  76   1        // $[P0MDIN - Port 0 Input Mode]
  77   1        /***********************************************************************
  78   1         - P0.0 pin is configured for digital mode
  79   1         - P0.1 pin is configured for analog mode
  80   1         - P0.2 pin is configured for digital mode
  81   1         - P0.3 pin is configured for digital mode
  82   1         - P0.4 pin is configured for digital mode
  83   1         - P0.5 pin is configured for digital mode
  84   1         - P0.6 pin is configured for digital mode
  85   1         - P0.7 pin is configured for digital mode
  86   1         ***********************************************************************/
  87   1        P0MDIN = P0MDIN_B0__DIGITAL | P0MDIN_B1__ANALOG | P0MDIN_B2__DIGITAL
  88   1            | P0MDIN_B3__DIGITAL | P0MDIN_B4__DIGITAL | P0MDIN_B5__DIGITAL
  89   1            | P0MDIN_B6__DIGITAL | P0MDIN_B7__DIGITAL;
  90   1        // [P0MDIN - Port 0 Input Mode]$
  91   1      
  92   1        // $[P0SKIP - Port 0 Skip]
  93   1        /***********************************************************************
  94   1         - P0.0 pin is skipped by the crossbar
  95   1         - P0.1 pin is skipped by the crossbar
  96   1         - P0.2 pin is skipped by the crossbar
  97   1         - P0.3 pin is skipped by the crossbar
  98   1         - P0.4 pin is skipped by the crossbar
  99   1         - P0.5 pin is skipped by the crossbar
 100   1         - P0.6 pin is skipped by the crossbar
 101   1         - P0.7 pin is skipped by the crossbar
 102   1         ***********************************************************************/
 103   1        P0SKIP = P0SKIP_B0__SKIPPED | P0SKIP_B1__SKIPPED | P0SKIP_B2__SKIPPED
 104   1            | P0SKIP_B3__SKIPPED | P0SKIP_B4__SKIPPED | P0SKIP_B5__SKIPPED
 105   1            | P0SKIP_B6__SKIPPED | P0SKIP_B7__SKIPPED;
 106   1        // [P0SKIP - Port 0 Skip]$
 107   1      
 108   1        // $[P0MASK - Port 0 Mask]
 109   1        // [P0MASK - Port 0 Mask]$
 110   1      
 111   1        // $[P0MAT - Port 0 Match]
 112   1        // [P0MAT - Port 0 Match]$
 113   1      
 114   1      }
C51 COMPILER V9.60.0.0   INITDEVICE                                                        10/13/2021 20:42:09 PAGE 3   

 115          
 116          extern void
 117          PBCFG_0_enter_DefaultMode_from_RESET (void)
 118          {
 119   1        // $[XBR2 - Port I/O Crossbar 2]
 120   1        /***********************************************************************
 121   1         - Weak Pullups enabled 
 122   1         - Crossbar enabled
 123   1         ***********************************************************************/
 124   1        XBR2 = XBR2_WEAKPUD__PULL_UPS_ENABLED | XBR2_XBARE__ENABLED;
 125   1        // [XBR2 - Port I/O Crossbar 2]$
 126   1      
 127   1        // $[PRTDRV - Port Drive Strength]
 128   1        // [PRTDRV - Port Drive Strength]$
 129   1      
 130   1        // $[XBR0 - Port I/O Crossbar 0]
 131   1        // [XBR0 - Port I/O Crossbar 0]$
 132   1      
 133   1        // $[XBR1 - Port I/O Crossbar 1]
 134   1        // [XBR1 - Port I/O Crossbar 1]$
 135   1      
 136   1      }
 137          
 138          extern void
 139          INTERRUPT_0_enter_DefaultMode_from_RESET (void)
 140          {
 141   1        // $[EIE1 - Extended Interrupt Enable 1]
 142   1        /***********************************************************************
 143   1         - Enable interrupt requests generated by the ADINT flag
 144   1         - Disable ADC0 Window Comparison interrupt
 145   1         - Enable interrupt requests generated by the comparator 0 CPRIF or CPFIF
 146   1         flags
 147   1         - Disable CP1 interrupts
 148   1         - Disable all Port Match interrupts
 149   1         - Disable all PCA0 interrupts
 150   1         - Disable all SMB0 interrupts
 151   1         - Enable interrupt requests generated by the TF3L or TF3H flags
 152   1         ***********************************************************************/
 153   1        EIE1 = EIE1_EADC0__ENABLED | EIE1_EWADC0__DISABLED | EIE1_ECP0__ENABLED
 154   1            | EIE1_ECP1__DISABLED | EIE1_EMAT__DISABLED | EIE1_EPCA0__DISABLED
 155   1            | EIE1_ESMB0__DISABLED | EIE1_ET3__ENABLED;
 156   1        // [EIE1 - Extended Interrupt Enable 1]$
 157   1      
 158   1        // $[EIP1 - Extended Interrupt Priority 1]
 159   1        // [EIP1 - Extended Interrupt Priority 1]$
 160   1      
 161   1        // $[IE - Interrupt Enable]
 162   1        /***********************************************************************
 163   1         - Enable each interrupt according to its individual mask setting
 164   1         - Enable interrupt requests generated by the INT0 input
 165   1         - Enable interrupt requests generated by the INT1 input
 166   1         - Disable all SPI0 interrupts
 167   1         - Disable all Timer 0 interrupt
 168   1         - Disable all Timer 1 interrupt
 169   1         - Enable interrupt requests generated by the TF2L or TF2H flags
 170   1         - Disable UART0 interrupt
 171   1         ***********************************************************************/
 172   1        IE = IE_EA__ENABLED | IE_EX0__ENABLED | IE_EX1__ENABLED | IE_ESPI0__DISABLED
 173   1            | IE_ET0__DISABLED | IE_ET1__DISABLED | IE_ET2__ENABLED
 174   1            | IE_ES0__DISABLED;
 175   1        // [IE - Interrupt Enable]$
 176   1      
 177   1        // $[IP - Interrupt Priority]
C51 COMPILER V9.60.0.0   INITDEVICE                                                        10/13/2021 20:42:09 PAGE 4   

 178   1        // [IP - Interrupt Priority]$
 179   1      
 180   1      }
 181          
 182          extern void
 183          WDT_0_enter_DefaultMode_from_RESET (void)
 184          {
 185   1        // $[Watchdog Timer Init Variable Declarations]
 186   1        uint32_t i;
 187   1        bool ea;
 188   1        // [Watchdog Timer Init Variable Declarations]$
 189   1      
 190   1        // $[WDTCN - Watchdog Timer Control]
 191   1        // Deprecated
 192   1        // [WDTCN - Watchdog Timer Control]$
 193   1      
 194   1        // $[WDTCN_2 - Watchdog Timer Control]
 195   1      
 196   1        // Feed WDT timer before disabling (Erratum WDT_E102)
 197   1        WDTCN = 0xA5;
 198   1      
 199   1        // Add 2 LFO cycle delay before disabling WDT (Erratum WDT_E102)
 200   1        for (i = 0; i < (2 * 3062500UL) / (10000 * 3); i++)
 201   1          {
 202   2            NOP ();
 203   2          }
 204   1      
 205   1        // Disable WDT before changing interval
 206   1        ea = IE_EA;
 207   1        IE_EA = 0;
 208   1        WDTCN = 0xDE;
 209   1        WDTCN = 0xAD;
 210   1        IE_EA = ea;
 211   1      
 212   1        // Delay 2 LFO cycles to ensure WDT is completely disabled
 213   1        for (i = 0; i < (2 * 3062500UL) / (10000 * 3); i++)
 214   1          {
 215   2            NOP ();
 216   2          }
 217   1      
 218   1        // Change WDT interval
 219   1        WDTCN = 4;
 220   1      
 221   1        // Start WDT
 222   1        WDTCN = 0xA5;
 223   1      
 224   1        // [WDTCN_2 - Watchdog Timer Control]$
 225   1      
 226   1      }
 227          
 228          extern void
 229          TIMER16_2_enter_DefaultMode_from_RESET (void)
 230          {
 231   1        // $[Timer Initialization]
 232   1        // Save Timer Configuration
 233   1        uint8_t TMR2CN0_TR2_save;
 234   1        TMR2CN0_TR2_save = TMR2CN0 & TMR2CN0_TR2__BMASK;
 235   1        // Stop Timer
 236   1        TMR2CN0 &= ~(TMR2CN0_TR2__BMASK);
 237   1        // [Timer Initialization]$
 238   1      
 239   1        // $[TMR2CN0 - Timer 2 Control]
 240   1        // [TMR2CN0 - Timer 2 Control]$
C51 COMPILER V9.60.0.0   INITDEVICE                                                        10/13/2021 20:42:09 PAGE 5   

 241   1      
 242   1        // $[TMR2H - Timer 2 High Byte]
 243   1        // [TMR2H - Timer 2 High Byte]$
 244   1      
 245   1        // $[TMR2L - Timer 2 Low Byte]
 246   1        // [TMR2L - Timer 2 Low Byte]$
 247   1      
 248   1        // $[TMR2RLH - Timer 2 Reload High Byte]
 249   1        /***********************************************************************
 250   1         - Timer 2 Reload High Byte = 0xFF
 251   1         ***********************************************************************/
 252   1        TMR2RLH = (0xFF << TMR2RLH_TMR2RLH__SHIFT);
 253   1        // [TMR2RLH - Timer 2 Reload High Byte]$
 254   1      
 255   1        // $[TMR2RLL - Timer 2 Reload Low Byte]
 256   1        /***********************************************************************
 257   1         - Timer 2 Reload Low Byte = 0xEB
 258   1         ***********************************************************************/
 259   1        TMR2RLL = (0xEB << TMR2RLL_TMR2RLL__SHIFT);
 260   1        // [TMR2RLL - Timer 2 Reload Low Byte]$
 261   1      
 262   1        // $[TMR2CN0]
 263   1        // [TMR2CN0]$
 264   1      
 265   1        // $[Timer Restoration]
 266   1        // Restore Timer Configuration
 267   1        TMR2CN0 |= TMR2CN0_TR2_save;
 268   1        // [Timer Restoration]$
 269   1      
 270   1      }
 271          
 272          extern void
 273          PORTS_1_enter_DefaultMode_from_RESET (void)
 274          {
 275   1        // $[P1 - Port 1 Pin Latch]
 276   1        /***********************************************************************
 277   1         - P1.0 is low. Set P1.0 to drive low
 278   1         - P1.1 is low. Set P1.1 to drive low
 279   1         - P1.2 is low. Set P1.2 to drive low
 280   1         - P1.3 is high. Set P1.3 to drive or float high
 281   1         ***********************************************************************/
 282   1        P1 = P1_B0__LOW | P1_B1__LOW | P1_B2__LOW | P1_B3__HIGH;
 283   1        // [P1 - Port 1 Pin Latch]$
 284   1      
 285   1        // $[P1MDOUT - Port 1 Output Mode]
 286   1        /***********************************************************************
 287   1         - P1.0 output is push-pull
 288   1         - P1.1 output is push-pull
 289   1         - P1.2 output is push-pull
 290   1         - P1.3 output is open-drain
 291   1         ***********************************************************************/
 292   1        P1MDOUT = P1MDOUT_B0__PUSH_PULL | P1MDOUT_B1__PUSH_PULL
 293   1            | P1MDOUT_B2__PUSH_PULL | P1MDOUT_B3__OPEN_DRAIN;
 294   1        // [P1MDOUT - Port 1 Output Mode]$
 295   1      
 296   1        // $[P1MDIN - Port 1 Input Mode]
 297   1        /***********************************************************************
 298   1         - P1.0 pin is configured for digital mode
 299   1         - P1.1 pin is configured for digital mode
 300   1         - P1.2 pin is configured for digital mode
 301   1         - P1.3 pin is configured for analog mode
 302   1         ***********************************************************************/
 303   1        P1MDIN = P1MDIN_B0__DIGITAL | P1MDIN_B1__DIGITAL | P1MDIN_B2__DIGITAL
C51 COMPILER V9.60.0.0   INITDEVICE                                                        10/13/2021 20:42:09 PAGE 6   

 304   1            | P1MDIN_B3__ANALOG;
 305   1        // [P1MDIN - Port 1 Input Mode]$
 306   1      
 307   1        // $[P1SKIP - Port 1 Skip]
 308   1        /***********************************************************************
 309   1         - P1.0 pin is skipped by the crossbar
 310   1         - P1.1 pin is skipped by the crossbar
 311   1         - P1.2 pin is skipped by the crossbar
 312   1         - P1.3 pin is skipped by the crossbar
 313   1         ***********************************************************************/
 314   1        P1SKIP = P1SKIP_B0__SKIPPED | P1SKIP_B1__SKIPPED | P1SKIP_B2__SKIPPED
 315   1            | P1SKIP_B3__SKIPPED;
 316   1        // [P1SKIP - Port 1 Skip]$
 317   1      
 318   1        // $[P1MASK - Port 1 Mask]
 319   1        // [P1MASK - Port 1 Mask]$
 320   1      
 321   1        // $[P1MAT - Port 1 Match]
 322   1        // [P1MAT - Port 1 Match]$
 323   1      
 324   1      }
 325          
 326          extern void
 327          ADC_0_enter_DefaultMode_from_RESET (void)
 328          {
 329   1        // $[ADC0CN1 - ADC0 Control 1]
 330   1        // [ADC0CN1 - ADC0 Control 1]$
 331   1      
 332   1        // $[ADC0MX - ADC0 Multiplexer Selection]
 333   1        /***********************************************************************
 334   1         - Select ADC0.11
 335   1         ***********************************************************************/
 336   1        ADC0MX = ADC0MX_ADC0MX__ADC0P11;
 337   1        // [ADC0MX - ADC0 Multiplexer Selection]$
 338   1      
 339   1        // $[ADC0CF - ADC0 Configuration]
 340   1        /***********************************************************************
 341   1         - SAR Clock Divider = 0x1F
 342   1         - ADC0 operates in 10-bit or 12-bit mode 
 343   1         - The on-chip PGA gain is 1
 344   1         - Normal Track Mode
 345   1         ***********************************************************************/
 346   1        ADC0CF = (0x1F << ADC0CF_ADSC__SHIFT) | ADC0CF_AD8BE__NORMAL
 347   1            | ADC0CF_ADGN__GAIN_1 | ADC0CF_ADTM__TRACK_NORMAL;
 348   1        // [ADC0CF - ADC0 Configuration]$
 349   1      
 350   1        // $[ADC0AC - ADC0 Accumulator Configuration]
 351   1        // [ADC0AC - ADC0 Accumulator Configuration]$
 352   1      
 353   1        // $[ADC0TK - ADC0 Burst Mode Track Time]
 354   1        // [ADC0TK - ADC0 Burst Mode Track Time]$
 355   1      
 356   1        // $[ADC0PWR - ADC0 Power Control]
 357   1        // [ADC0PWR - ADC0 Power Control]$
 358   1      
 359   1        // $[ADC0GTH - ADC0 Greater-Than High Byte]
 360   1        // [ADC0GTH - ADC0 Greater-Than High Byte]$
 361   1      
 362   1        // $[ADC0GTL - ADC0 Greater-Than Low Byte]
 363   1        // [ADC0GTL - ADC0 Greater-Than Low Byte]$
 364   1      
 365   1        // $[ADC0LTH - ADC0 Less-Than High Byte]
 366   1        // [ADC0LTH - ADC0 Less-Than High Byte]$
C51 COMPILER V9.60.0.0   INITDEVICE                                                        10/13/2021 20:42:09 PAGE 7   

 367   1      
 368   1        // $[ADC0LTL - ADC0 Less-Than Low Byte]
 369   1        // [ADC0LTL - ADC0 Less-Than Low Byte]$
 370   1      
 371   1        // $[ADC0CN0 - ADC0 Control 0]
 372   1        /***********************************************************************
 373   1         - Enable ADC0 
 374   1         - ADC0 conversion initiated on overflow of Timer 2
 375   1         ***********************************************************************/
 376   1        ADC0CN0 &= ~ADC0CN0_ADCM__FMASK;
 377   1        ADC0CN0 |= ADC0CN0_ADEN__ENABLED | ADC0CN0_ADCM__TIMER2;
 378   1        // [ADC0CN0 - ADC0 Control 0]$
 379   1      
 380   1      }
 381          
 382          extern void
 383          VREF_0_enter_DefaultMode_from_RESET (void)
 384          {
 385   1        // $[REF0CN - Voltage Reference Control]
 386   1        /***********************************************************************
 387   1         - Disable the Temperature Sensor
 388   1         - The ADC0 ground reference is the GND pin
 389   1         - The internal reference operates at 1.65 V nominal
 390   1         - The ADC0 voltage reference is the VDD pin
 391   1         ***********************************************************************/
 392   1        REF0CN = REF0CN_TEMPE__TEMP_DISABLED | REF0CN_GNDSL__GND_PIN
 393   1            | REF0CN_IREFLVL__1P65 | REF0CN_REFSL__VDD_PIN;
 394   1        // [REF0CN - Voltage Reference Control]$
 395   1      
 396   1      }
 397          
 398          extern void
 399          TIMER01_0_enter_DefaultMode_from_RESET (void)
 400          {
 401   1        // $[Timer Initialization]
 402   1        //Save Timer Configuration
 403   1        uint8_t TCON_save;
 404   1        TCON_save = TCON;
 405   1        //Stop Timers
 406   1        TCON &= ~TCON_TR0__BMASK & ~TCON_TR1__BMASK;
 407   1      
 408   1        // [Timer Initialization]$
 409   1      
 410   1        // $[TH0 - Timer 0 High Byte]
 411   1        /***********************************************************************
 412   1         - Timer 0 High Byte = 0xFF
 413   1         ***********************************************************************/
 414   1        TH0 = (0xFF << TH0_TH0__SHIFT);
 415   1        // [TH0 - Timer 0 High Byte]$
 416   1      
 417   1        // $[TL0 - Timer 0 Low Byte]
 418   1        /***********************************************************************
 419   1         - Timer 0 Low Byte = 0xFF
 420   1         ***********************************************************************/
 421   1        TL0 = (0xFF << TL0_TL0__SHIFT);
 422   1        // [TL0 - Timer 0 Low Byte]$
 423   1      
 424   1        // $[TH1 - Timer 1 High Byte]
 425   1        // [TH1 - Timer 1 High Byte]$
 426   1      
 427   1        // $[TL1 - Timer 1 Low Byte]
 428   1        // [TL1 - Timer 1 Low Byte]$
 429   1      
C51 COMPILER V9.60.0.0   INITDEVICE                                                        10/13/2021 20:42:09 PAGE 8   

 430   1        // $[Timer Restoration]
 431   1        //Restore Timer Configuration
 432   1        TCON |= (TCON_save & TCON_TR0__BMASK) | (TCON_save & TCON_TR1__BMASK);
 433   1      
 434   1        // [Timer Restoration]$
 435   1      
 436   1      }
 437          
 438          extern void
 439          TIMER_SETUP_0_enter_DefaultMode_from_RESET (void)
 440          {
 441   1        // $[CKCON0 - Clock Control 0]
 442   1        /***********************************************************************
 443   1         - System clock divided by 12
 444   1         - Counter/Timer 0 uses the system clock
 445   1         - Timer 2 high byte uses the clock defined by T2XCLK in TMR2CN0
 446   1         - Timer 2 low byte uses the clock defined by T2XCLK in TMR2CN0
 447   1         - Timer 3 high byte uses the clock defined by T3XCLK in TMR3CN0
 448   1         - Timer 3 low byte uses the clock defined by T3XCLK in TMR3CN0
 449   1         - Timer 1 uses the clock defined by the prescale field, SCA
 450   1         ***********************************************************************/
 451   1        CKCON0 = CKCON0_SCA__SYSCLK_DIV_12 | CKCON0_T0M__SYSCLK
 452   1            | CKCON0_T2MH__EXTERNAL_CLOCK | CKCON0_T2ML__EXTERNAL_CLOCK
 453   1            | CKCON0_T3MH__EXTERNAL_CLOCK | CKCON0_T3ML__EXTERNAL_CLOCK
 454   1            | CKCON0_T1M__PRESCALE;
 455   1        // [CKCON0 - Clock Control 0]$
 456   1      
 457   1        // $[TMOD - Timer 0/1 Mode]
 458   1        /***********************************************************************
 459   1         - Mode 1, 16-bit Counter/Timer
 460   1         - Mode 0, 13-bit Counter/Timer
 461   1         - Timer Mode
 462   1         - Timer 0 enabled when TR0 = 1 irrespective of INT0 logic level
 463   1         - Timer Mode
 464   1         - Timer 1 enabled when TR1 = 1 irrespective of INT1 logic level
 465   1         ***********************************************************************/
 466   1        TMOD = TMOD_T0M__MODE1 | TMOD_T1M__MODE0 | TMOD_CT0__TIMER
 467   1            | TMOD_GATE0__DISABLED | TMOD_CT1__TIMER | TMOD_GATE1__DISABLED;
 468   1        // [TMOD - Timer 0/1 Mode]$
 469   1      
 470   1        // $[TCON - Timer 0/1 Control]
 471   1        /***********************************************************************
 472   1         - INT0 is edge triggered
 473   1         - INT1 is edge triggered
 474   1         ***********************************************************************/
 475   1        TCON |= TCON_IT0__EDGE | TCON_IT1__EDGE;
 476   1        // [TCON - Timer 0/1 Control]$
 477   1      
 478   1      }
 479          
 480          extern void
 481          CMP_0_enter_DefaultMode_from_RESET (void)
 482          {
 483   1        // $[CMP0MX - Comparator 0 Multiplexer Selection]
 484   1        /***********************************************************************
 485   1         - External pin CMP0P.8
 486   1         - External pin CMP0N.1
 487   1         ***********************************************************************/
 488   1        uint8_t delay;
 489   1      
 490   1        CMP0MX = CMP0MX_CMXP__LDO_OUT | CMP0MX_CMXN__CMP0N1;
 491   1        // Delay to allow the comparator inputs to settle
 492   1        for (delay = 0; delay < 0x20; delay++)
C51 COMPILER V9.60.0.0   INITDEVICE                                                        10/13/2021 20:42:09 PAGE 9   

 493   1          ;
 494   1        // [CMP0MX - Comparator 0 Multiplexer Selection]$
 495   1      
 496   1        // $[CMP0MD - Comparator 0 Mode]
 497   1        /***********************************************************************
 498   1         - Mode 3 
 499   1         - Comparator rising-edge interrupt enabled
 500   1         ***********************************************************************/
 501   1        CMP0MD |= CMP0MD_CPMD__MODE3 | CMP0MD_CPRIE__RISE_INT_ENABLED;
 502   1        // [CMP0MD - Comparator 0 Mode]$
 503   1      
 504   1        // $[CMP0CN0 - Comparator 0 Control 0]
 505   1        /***********************************************************************
 506   1         - Comparator enabled
 507   1         ***********************************************************************/
 508   1        CMP0CN0 |= CMP0CN0_CPEN__ENABLED;
 509   1        // [CMP0CN0 - Comparator 0 Control 0]$
 510   1      
 511   1      }
 512          
 513          extern void
 514          RSTSRC_0_enter_DefaultMode_from_RESET (void)
 515          {
 516   1        // $[RSTSRC - Reset Source]
 517   1        /***********************************************************************
 518   1         - A power-on or supply monitor reset did not occur
 519   1         - A missing clock detector reset did not occur
 520   1         - A Comparator 0 reset occurred
 521   1         ***********************************************************************/
 522   1        RSTSRC = RSTSRC_PORSF__NOT_SET | RSTSRC_MCDRSF__NOT_SET | RSTSRC_C0RSEF__SET;
 523   1        // [RSTSRC - Reset Source]$
 524   1      
 525   1      }
 526          
 527          extern void
 528          EXTINT_0_enter_DefaultMode_from_RESET (void)
 529          {
 530   1      
 531   1        // $[IT01CF - INT0/INT1 Configuration]
 532   1        /***********************************************************************
 533   1         - INT0 input is active low
 534   1         - Select P0.2
 535   1         - INT1 input is active low
 536   1         - Select P0.0
 537   1         ***********************************************************************/
 538   1        IT01CF = IT01CF_IN0PL__ACTIVE_LOW | IT01CF_IN0SL__P0_2
 539   1            | IT01CF_IN1PL__ACTIVE_LOW | IT01CF_IN1SL__P0_0;
 540   1        // [IT01CF - INT0/INT1 Configuration]$
 541   1      
 542   1      }
 543          
 544          extern void
 545          TIMER16_3_enter_DefaultMode_from_RESET (void)
 546          {
 547   1        // $[Timer Initialization]
 548   1        // Save Timer Configuration
 549   1        uint8_t TMR3CN0_TR3_save;
 550   1        TMR3CN0_TR3_save = TMR3CN0 & TMR3CN0_TR3__BMASK;
 551   1        // Stop Timer
 552   1        TMR3CN0 &= ~(TMR3CN0_TR3__BMASK);
 553   1        // [Timer Initialization]$
 554   1      
 555   1        // $[TMR3CN0 - Timer 3 Control]
C51 COMPILER V9.60.0.0   INITDEVICE                                                        10/13/2021 20:42:09 PAGE 10  

 556   1        // [TMR3CN0 - Timer 3 Control]$
 557   1      
 558   1        // $[TMR3H - Timer 3 High Byte]
 559   1        // [TMR3H - Timer 3 High Byte]$
 560   1      
 561   1        // $[TMR3L - Timer 3 Low Byte]
 562   1        // [TMR3L - Timer 3 Low Byte]$
 563   1      
 564   1        // $[TMR3RLH - Timer 3 Reload High Byte]
 565   1        /***********************************************************************
 566   1         - Timer 3 Reload High Byte = 0xFF
 567   1         ***********************************************************************/
 568   1        TMR3RLH = (0xFF << TMR3RLH_TMR3RLH__SHIFT);
 569   1        // [TMR3RLH - Timer 3 Reload High Byte]$
 570   1      
 571   1        // $[TMR3RLL - Timer 3 Reload Low Byte]
 572   1        /***********************************************************************
 573   1         - Timer 3 Reload Low Byte = 0xE0
 574   1         ***********************************************************************/
 575   1        TMR3RLL = (0xE0 << TMR3RLL_TMR3RLL__SHIFT);
 576   1        // [TMR3RLL - Timer 3 Reload Low Byte]$
 577   1      
 578   1        // $[TMR3CN0]
 579   1        // [TMR3CN0]$
 580   1      
 581   1        // $[Timer Restoration]
 582   1        // Restore Timer Configuration
 583   1        TMR3CN0 |= TMR3CN0_TR3_save;
 584   1        // [Timer Restoration]$
 585   1      
 586   1      }
 587          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    319    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
